<div class="ibox float-e-margins">
	<div class="ibox-title">
		<h5 class="center-block">{{ titulo }}</h5>
	</div>
	<div class="ibox-content">
		<form id="filtros">
			<div class="row ">

				<div class="col-sm-2">
					<b>Tipo Orden</b> <br>

					<div class="input-group">
						<select class="form-control" name="tipo_orden" id="tipo_orden">
							<option value=""></option>
							<option value="extrusion">Extrusión</option>
							<option value="corte_bobinado">Corte - Bobinado</option>
						</select>
					</div>
				</div>

				<div class="col-sm-2">
					<b>Número Orden</b> <br>

					<div class="input-group">
						<input type="text" class="form-control" name="numero_orden" id="numero_orden" />
					</div>
				</div>

				<div class="col-sm-2">
					<b>Tipo Producto</b> <br>

					<div class="input-group">
						<select class="form-control" name="tipo_producto" id="tipo_producto">
							<option value=""></option>
							<option v-for="(v,k) in tipo_producto" v-html="v" :value="k"></option>
						</select>
					</div>
				</div>

				<div class="col-sm-2">
					<b>Producto Extrusión</b> <br>

					<div class="input-group">
						<input type="text" class="form-control" name="producto_extrusion" id="producto_extrusion" />
						{#<input type="hidden" class="form-control" name="producto_extrusion" id="producto_extrusion"/>#}
						{#<div class="input-group-btn">#}
							{#<button class="btn btn-default" type="button" v-on:click="buscarProductoExtrusion">#}
								{#<i class="glyphicon glyphicon-search"></i></button>#}
						{#</div>#}
					</div>
				</div>

				<div class="col-sm-2">
					<b>Producto Corte - Bobinado</b> <br>
					<div class="input-group">
						<input type="text" class="form-control" name="producto" id="producto" />
						{#<input type="hidden" class="form-control" name="producto" id="producto"/>#}
						{#<div class="input-group-btn">#}
							{#<button class="btn btn-default" type="button" v-on:click="buscarProducto">#}
								{#<i class="glyphicon glyphicon-search"></i></button>#}
						{#</div>#}
					</div>
				</div>

				{#<div class="col-sm-2">#}
					{#<b>Fecha corte </b> <br>#}

					{#{{ text_field_tag("fecha_corte", "", {class:'form-control fecha'}) }}#}
				{#</div>#}

			</div>
		</form>
	</div>
	<div class="ibox-footer">
		<button id="btnFiltro" class="btn btn-success"><i class="glyphicon glyphicon-search"></i> Filtrar</button>
		<button id="btnTodos" class="btn btn-success"><i class="far fa-eye"></i> Ver todos</button>

		{% include "reportes/loader.twig" %}
		<script>
			var appFiltros = new Vue({
				el: '#filtros',
				data: {
					tipo_producto: {{ tipo_producto|raw }}
				},
				methods: {
					buscarProductoExtrusion: function () {
						var self = this;
						var data = {};
						$('#productoExtrusionContent').load('{{ root }}/productoExtrusion/buscador', data, function () {
							callbackProducto = function (pro) {
								$("#producto_extrusion").val(pro.id_producto);
								$("#producto_extrusion_nombre").val(pro.nombre);
								$('#modalProductoExtrusion').modal('hide');
							};
							$('#modalProductoExtrusion').modal('show');
						});
					},
					buscarProducto: function () {
						var self = this;
						var data = {};
						$('#productoContent').load('{{ root }}/producto/buscador', data, function () {
							callbackProducto = function (pro) {
								$("#producto").val(pro.id_producto);
								$("#producto_nombre").val(pro.nombre);
								$('#modalProducto').modal('hide');
							};
							$('#modalProducto').modal('show');
						});
					},
				},
				updated: function () {

				}
			});

			$(function () {
				$('.fecha').datepicker({
					dateFormat: 'yy-mm-dd',
					showButtonPanel: true
				});

			});
		</script>
	</div>

	<div class="modal inmodal fade" id="modalProductoExtrusion" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog" style="width:90%">
			<div class="modal-content">
				<div class="modal-header" style="padding:10px">
					<div class="modal-title">Buscar Producto Extrusión</div>
				</div>
				<div class="modal-body">
					<div id="productoExtrusionContent"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal inmodal fade" id="modalProducto" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog" style="width:90%">
			<div class="modal-content">
				<div class="modal-header" style="padding:10px">
					<div class="modal-title">Buscar Producto</div>
				</div>
				<div class="modal-body">
					<div id="productoContent"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
</div>